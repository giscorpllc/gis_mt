(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var t=e.i(43476),r=e.i(47163);function n({className:e,...n}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...n})}function a({className:e,...n}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...n})}function s({className:e,...n}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...n})}function i({className:e,...n}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",e),...n})}function o({className:e,...n}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...n})}e.s(["Card",()=>n,"CardContent",()=>o,"CardDescription",()=>i,"CardHeader",()=>a,"CardTitle",()=>s])},8163,97298,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(47163);function a({value:e,onChange:a,disabled:s}){let i=(0,r.useRef)([]),o=Array.from({length:6},(t,r)=>e[r]??"");function c(t,r){let n=Array.from({length:6},(t,r)=>e[r]??"");n[t]=r,a(n.join(""))}function d(e){e.preventDefault();let t=e.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);t&&(a(t),i.current[Math.min(t.length,5)]?.focus())}return(0,t.jsx)("div",{className:"flex justify-center gap-2",children:o.map((e,r)=>(0,t.jsx)("input",{ref:e=>{i.current[r]=e},type:"text",inputMode:"numeric",maxLength:1,value:e,disabled:s,onChange:e=>{let t;(t=e.target.value.replace(/\D/g,""))&&(c(r,t[0]),r<5&&i.current[r+1]?.focus())},onKeyDown:e=>{"Backspace"===e.key?(e.preventDefault(),o[r]?c(r,""):r>0&&(c(r-1,""),i.current[r-1]?.focus())):"ArrowLeft"===e.key&&r>0?i.current[r-1]?.focus():"ArrowRight"===e.key&&r<5&&i.current[r+1]?.focus()},onPaste:d,onFocus:e=>e.target.select(),className:(0,n.cn)("h-12 w-12 rounded-md border border-input bg-background","text-center text-lg font-semibold","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50")},r))})}e.s(["OtpInput",()=>a],8163);var s=e.i(67881);function i({onResend:e,initialSeconds:n=60}){let[a,i]=(0,r.useState)(n),[o,c]=(0,r.useState)(!1);async function d(){c(!0);try{await e(),i(n)}finally{c(!1)}}(0,r.useEffect)(()=>{if(a<=0)return;let e=setTimeout(()=>i(e=>e-1),1e3);return()=>clearTimeout(e)},[a]);let l=String(Math.floor(a/60)).padStart(2,"0"),u=String(a%60).padStart(2,"0");return a>0?(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Resend code in"," ",(0,t.jsxs)("span",{className:"font-medium tabular-nums",children:[l,":",u]})]}):(0,t.jsx)(s.Button,{type:"button",variant:"ghost",size:"sm",onClick:d,disabled:o,children:o?"Sending…":"Resend code"})}e.s(["ResendTimer",()=>i],97298)},54248,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(53145),a=e.i(94814),s=e.i(18566),i=e.i(24088),o=e.i(54858),c=e.i(106),d=e.i(8163),l=e.i(97298),u=e.i(67881),m=e.i(81947),f=e.i(70065),h=e.i(74946);function x(){var e;let x=(0,s.useRouter)(),{pendingVerification:g}=(0,c.useAuthStore)(),[p,j]=(0,r.useState)(null);(0,r.useEffect)(()=>{g||x.replace("/auth/register")},[g,x]);let b=(0,n.useForm)({resolver:(0,a.zodResolver)(i.otpSchema),defaultValues:{code:""}});if(!g)return null;async function y(e){j(null);try{await (0,o.apiRequest)("/api/v1/auth/verify",{method:"POST",body:{user_id:g.user_id,code:e.code}}),x.push("/dashboard")}catch(e){j(e.message),b.reset()}}async function v(){await (0,o.apiRequest)("/api/v1/auth/resend-verification",{method:"POST",body:{user_id:g.user_id}})}let S=b.watch("code");return(0,t.jsxs)(f.Card,{className:"w-full max-w-md",children:[(0,t.jsxs)(f.CardHeader,{className:"text-center",children:[(0,t.jsx)(f.CardTitle,{className:"text-2xl",children:"Verify your account"}),(0,t.jsxs)(f.CardDescription,{children:["Enter the 6-digit code sent to"," ",(0,t.jsx)("span",{className:"font-medium text-foreground",children:function(e){let[t,r]=e.split("@");return t&&r?`${t[0]}***@${r}`:e}(g.email)})," ","and"," ",(0,t.jsx)("span",{className:"font-medium text-foreground",children:(e=g.phone).length>=4?`+1 *** ***${e.slice(-4)}`:e})]})]}),(0,t.jsx)(f.CardContent,{children:(0,t.jsx)(h.Form,{...b,children:(0,t.jsxs)("form",{onSubmit:b.handleSubmit(y),className:"space-y-6",children:[p&&(0,t.jsx)(m.Alert,{variant:"destructive",children:(0,t.jsx)(m.AlertDescription,{children:p})}),(0,t.jsx)(h.FormField,{control:b.control,name:"code",render:({field:e})=>(0,t.jsxs)(h.FormItem,{children:[(0,t.jsx)(h.FormControl,{children:(0,t.jsx)(d.OtpInput,{value:e.value,onChange:e.onChange,disabled:b.formState.isSubmitting})}),(0,t.jsx)(h.FormMessage,{className:"text-center"})]})}),(0,t.jsx)(u.Button,{type:"submit",className:"w-full",disabled:b.formState.isSubmitting||S.length<6,children:b.formState.isSubmitting?"Verifying…":"Verify account"}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(l.ResendTimer,{onResend:v})})]})})})]})}e.s(["VerifyForm",()=>x])}]);